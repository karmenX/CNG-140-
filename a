#include <stdio.h>
#include <stdlib.h>

void writedata(int *string, int size);
float averagedata(int *string, int size);
int main(){

    int temperatures [7] = {37, 42, 48, 43, 38, 32, 30};
    float avg;


    writedata(temperatures,7);
    avg=averagedata(temperatures,7);
    printf("Average is %.2f",avg);



    return 0;
}
void writedata(int *string, int size){

    char filename[]="out.txt";
    FILE *stream;

    stream= fopen(filename,"w");
    if(stream==NULL){
        printf("Failed to open the file.\n");
        exit(1);
    }
    else
        printf("out.txt is created!\n");

    for(int i=0;i<size;i++){
        fprintf(stream,"%d\n",*(string+i));
    }

    fclose(stream);
}
float averagedata(int *string, int size){

    int total=0,value,count=0;
    float average;
    char filename[]="out.txt";
    FILE *stream;
    stream= fopen(filename,"r");
    if(stream==NULL){
        printf("Failed to open the file.\n");
        exit(1);
    }
    else
        printf("out.txt is read back again!\n");

    while (fscanf(stream,"%d",&value)!=EOF){
        if(count<size) {
            *(string+count)=value;
            count++;
        }
        total+=value;
    }
    fclose(stream);

    if(count==0)
        return 0;

    average=(float ) total/ (float )size;

    return average;
}
