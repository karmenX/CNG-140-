#include <stdio.h>
#include <string.h>
#include <stdlib.h>

#define MAX_WORDS 5
#define SIZE 20

struct Word{
    char language[SIZE];
    int size;
    char word[MAX_WORDS][SIZE];
};

void load_word_list (struct Word *data, char *filename);
void add_word(char word[], struct Word *data);
int contains(char word[],struct Word  *data);
int equal_lists(struct Word *data1, struct Word *data2);

int main(){

    struct Word wordlist={"English",0,"0"};
    struct Word wordlist2={0};
    char filename[]="words.txt";
    int size_of_second_list;
    char word[SIZE];

    load_word_list(&wordlist,filename);

    printf("Enter a word to search in the first list:");
    scanf("%s",word);
    if(contains(word,&wordlist)==1)
        printf("Word %s is found in the first wordlist\n",word);
    else
        printf("Word %s is not found in the first wordlist\n",word);

    printf("Now let's create the second wordlist!\n");
    printf("How many words should the second wordlist contain?");
    scanf("%d",&size_of_second_list);
    wordlist2.size=0;

    printf("Enter the language of the second wordlist:");
    scanf("%s",wordlist2.language);

    printf("Enter %d words of the second wordlist: ",size_of_second_list);
    for(int i=0;i<size_of_second_list;i++){
        printf("Word %d: ",i+1);
        scanf("%s",word);
        add_word(word,&wordlist2);
    }

    if(equal_lists(&wordlist,&wordlist2)==0)
        printf("The lists doesnt match\n");
    else
        printf("The lists does match\n");

    printf("First list is:\n");
    for(int i=0;i<wordlist.size;i++){
        printf("%s\n",wordlist.word[i]);
    }
    printf("----------------------\n");
    printf("Second list is:\n");
    for(int i=0;i<wordlist2.size;i++){
        printf("%s\n",wordlist2.word[i]);
    }

    return 0;
}


void load_word_list (struct Word *data, char *filename){

    FILE *stream= fopen(filename,"r");
    if(stream==NULL){
        printf("Failed to open the file.\n");
        exit(1);
    }

    data->size=0;

    while(data->size<MAX_WORDS && fscanf(stream," %s\n",data->word[data->size])!=EOF){
        printf("%s\n", data->word[data->size]);
        data->size++;
    }

    printf("The words.txt file has been loaded successfully and the first \n"
           "wordlist is created.\n");
    fclose(stream);


}
void add_word(char word[], struct Word  *data){

    if(data->size>=MAX_WORDS)
        printf("List full, word not added.\n");
    else if(contains(word,data))
        printf("The word is already in the list.\n");
    else {
        strcpy(data->word[data->size], word);
        data->size++;
    }

}
int contains(char word[], struct Word  *data){

    int i;
    for(i=0;i<data->size;i++) {
        if (strcmp(word,data->word[i]) == 0) {
            return 1;
        }
    }

    return 0;
}

int equal_lists(struct Word  *data1, struct Word *data2){

    if(data1->size!=data2->size){
        printf("The sizes doesnt match.\n");
        return 0;
    }
    if(strcmp(data1->language,data2->language)!=0){
        printf("The word lists are not in the same language\n");
        return 0;
    }
    for(int i=0;i<data2->size;i++){
        if(!contains(data1->word[i],data2)){
            printf("The words doesnt match.\n");
            return 0;}
    }
    return 1;

}
